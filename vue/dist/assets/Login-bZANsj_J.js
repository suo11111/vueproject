import{_ as c,c as g,a as s,w as t,E as w,r as h,o as f,b as a,d as _,e as y,f as F,g as V,h as v,i as b}from"./index-DbrN3NDs.js";const x={name:"Login",data(){return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(n){this.redirect=n.query&&n.query.redirect},immediate:!0}},methods:{showPwd(){this.passwordType==="password"?this.passwordType="":this.passwordType="password"},handleLogin(){this.$refs.loginForm.validate(n=>{if(n)this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(()=>{this.$router.push({path:this.redirect||"/"}),this.loading=!1}).catch(()=>{this.loading=!1});else return console.log("error submit!!"),!1})}}},T={class:"login-container"},E={class:"svg-container"},k={class:"svg-container"};function C(n,e,L,q,o,l){const i=h("svg-icon"),d=y,p=_,m=V,u=w;return f(),g("div",T,[s(u,{ref:"loginForm",model:o.loginForm,rules:o.loginRules,class:"login-form","auto-complete":"on","label-position":"left"},{default:t(()=>[e[4]||(e[4]=a("h3",{class:"title"},"超市货架管理系统",-1)),s(p,{prop:"username"},{default:t(()=>[a("span",E,[s(i,{"icon-class":"user"})]),s(d,{modelValue:o.loginForm.username,"onUpdate:modelValue":e[0]||(e[0]=r=>o.loginForm.username=r),name:"username",type:"text","auto-complete":"on",placeholder:"用户名"},null,8,["modelValue"])]),_:1}),s(p,{prop:"password"},{default:t(()=>[a("span",k,[s(i,{"icon-class":"password"})]),s(d,{modelValue:o.loginForm.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.loginForm.password=r),name:"password",type:o.passwordType,"auto-complete":"on",placeholder:"密码",onKeyup:F(l.handleLogin,["enter"])},null,8,["modelValue","type","onKeyup"]),a("span",{class:"show-pwd",onClick:e[2]||(e[2]=(...r)=>l.showPwd&&l.showPwd(...r))},[s(i,{"icon-class":o.passwordType==="password"?"eye":"eye-open"},null,8,["icon-class"])])]),_:1}),s(m,{loading:o.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:v(l.handleLogin,["prevent"])},{default:t(()=>e[3]||(e[3]=[b("登录")])),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}const K=c(x,[["render",C]]);export{K as default};
